<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户注册</title>
</head>
<link rel="stylesheet" href="../../css/Scenic/Scenic_spot.css">
<link rel="stylesheet" href="../../css/Login/Login_page.css">
<link rel="stylesheet" href="../../css/Login/register.css">

<body>
    <div class="sign">
        <!-- 导航 -->
        <div class="sign-top">
            <div>
                <img src="../../img/Login/xd-pic-slogo.png" alt="">
                <!-- <p>依《网络安全法》相关要求，即日起全网购会员<span>登陆需绑定手机</span>。为保障您的账户安全及正常使用，如您尚未绑定，请尽快完成绑定，感谢您的支持和理解 </p> -->
            </div>
        </div>
        <!-- 中间部分 -->
        <div class="sign-content">
            <div class="content-login">
                <div class="login">
                    <div class="login-top">
                        <img src="../../img/login-pic-user-01.png" alt="">
                        <p>免费注册</p>
                    </div>
                    <div class="login-content">
                        <input type="hidden" id="sessionId" name="sessionId" value="" />
                        <div class="username">
                            <span>用户名</span>
                            <input class="userName" maxlength="16" type="text" placeholder="请输入用户名">
                        </div>
                        <div class="password">
                            <span>设置密码</span>
                            <input class="psd" type="password" maxlength="18" placeholder="请输入密码">
                        </div>
                        <div class="password truePassword">
                            <span>确认密码</span>
                            <input class="truePsd" type="password" maxlength="18" placeholder="请输入确认密码">
                        </div>
                        <div class="password">
                            <span>绑定手机</span>
                            <input class="Btell" type="text" maxlength="11" placeholder="建议使用常用手机">
                        </div>
                        <div class="Verification_Code">
                            <span>验证码</span>
                            <input class="hasVilidateCode" maxlength="4" type="text" placeholder="请输入验证码">
                        </div>
                        <div class="yanzhengma"><img class="yzm" onclick="yzm()" src="" alt=""></div>
                        <div class="Tell_Verification_Code">
                            <span>手机验证码</span>
                            <input class="tellhasVilidateCode" maxlength="6" type="text" placeholder="请输入手机验证码">
                        </div>
                        <div class="Tell_Verification_Code_fasong" onclick="sendCode()" chongfu="true">获取短信验证码</div>
                        <div class="login_button">
                            <img src="../../img/loginButton.png" alt="">
                            <p class="login_button_font">立即注册</p>
                        </div>


                        <img class="boxBottom" src="../../img/loginBoxBottom.png" alt="">
                    </div>
                </div>
            </div>
        </div>
        <!-- 底部 -->
        <!-- <footer>
            <div class="Development">
                <p><img src="../../img/public-bot-logo.png" alt=""></p>
                <p><span>手游新疆</span><span>域名(www.shouyouxinjiang.com)    版权所有</span><span>新ICP备18001279号-1</span></p>
                <p><span>新公安网安备 65230102652521</span><span>新网文[2018]10409-11号</span><span>增值电信业务经营许可证:新B2-20180050 </span></p>
            </div>

        </footer> -->
        <footer>
            <div class="contact">
                <ul class="Hotline">
                    <li class="Hotline_line">
                        <img src="../../img/public-end-icon-phone.png" alt="">
                        <div>
                            <p>服务热线</p>
                            <p>400-123-456</p>
                        </div>
                    </li>
                    <li class="Hotline_line">
                        <img src="../../img/public-end-icon-mail.png" alt="">
                        <p style="line-height: 2.9;">意见反馈</p>
                    </li>
                </ul>
                <ul class="Opinion">
                    <li class="first_title">手游新疆旅游网</li>
                    <li>覆盖全疆100多个县</li>
                    <li>10,000,000</li>
                    <li>8030家酒店</li>
                    <li>1000家新疆特色餐饮</li>
                    <li>手游新疆APP带您领略新疆风貌</li>
                </ul>
                <ul class="Opinion">
                    <li class="first_title">关于我们</li>
                    <li>关于手游新疆</li>
                    <li>联系我们</li>
                    <li>隐私政策</li>
                    <li>商标声明</li>
                    <li>新疆非遗入住协议</li>
                    <li>商城平台服务协议</li>
                    <li>网站地图</li>
                </ul>
                <ul class="Opinion">
                    <li class="first_title">快速导航</li>
                    <li>门票购买</li>
                    <li>线路选择</li>
                    <li>旅游特价</li>
                    <li>租车服务</li>
                    <li>旅游问答</li>
                    <li>订火车票</li>
                    <li>订购机票</li>
                    <li>旅游保险</li>
                    <li>旅游资讯</li>
                    <li>APP下载</li>
                </ul>
                <div class="QR_code">
                    <p class="first_title" style="margin-bottom: 13px;">手游新疆App</p>
                    <img src="../../img/public-end-ewm-1.jpg" alt="">
                    <p class="QR_code_content">下载有惊喜哦</p>
                </div>
                <div class="QR_code">
                    <p class="first_title" style="margin-bottom: 13px;">手游新疆公众号</p>
                    <img src="../../img/public-end-ewm-2.jpg" alt="">
                    <p class="QR_code_content">快来关注我吧</p>
                </div>

            </div>
            <div class="link">
                <p>集团网站:<span>手游新疆资讯网</span><span>手游新疆XX网</span><span>手游新疆XX网</span><span>手游新疆XX网</span><span>手游新疆XX网</span><span>手游新疆XX网</span><span>手游新疆XX网</span>
                </p>
                <p>友情链接:<span>百度网旅游</span>
                    <span>途牛网旅游</span>
                    <span>人民网旅游</span>
                    <span>奇艺旅游</span>
                </p>
            </div>
            <div class="website">
                <div class="love">
                    <p>新疆的旅游路上,我们一直都在</p>
                    <p><img src="../../img/public-end_icon-1.png" alt=""><img src="../../img/public-end_icon-2.png"
                            alt=""><img src="../../img/public-end_icon-3.png" alt=""></p>
                </div>
                <div class="Development">
                    <p><img src="../../img/public-bot-logo.png" alt=""></p>
                    <p><span>手游新疆</span><span>域名(www.shouyouxinjiang.com) 版权所有</span><span>新ICP备18001279号-1</span></p>
                    <p><span>新公安网安备 65230102652521</span><span>新网文[2018]10409-11号</span><span>增值电信业务经营许可证:新B2-20180050
                        </span></p>
                </div>
            </div>

        </footer>
</body>
<!-- url地址 -->
<script src="../../js/Root/root.js"></script>
<script src="../../js/jquery-2.1.4.min.js"></script>
<script src="../../js/jquery.min.js"></script>
<script>
    (function () {
        yzm()
    })()
    console.log(url)
    var wait = 60;
    function yzm() {
        var yzm = $(".yzm").attr('src', 'http://www.shouyouxinjiang.com/frontshow/register/getCustomerLoginCode?time=' + new Date());
    }
    //用户名验证
    $(".userName").blur(function () {
        var psdZ = /^[a-zA-Z0-9\u4e00-\u9fa5-_]{2,16}$/;
        var username = $(".userName").val();
        var res = psdZ.test(username)
        if (res == false) {
            alert("用户名为4-20个字符,可由字母,汉字,数字,'-','_'组成")
        } else {
            url = url.userName;
            $.ajaxSettings.async = false;
            $.getJSON(url, { customerName: username, ranNum: Math.random() }, function (data) {
                console.log(data)
                if (data == "true") {
                    alert("用户名已存在,请重新输入!")
                    return;
                }
            });
        }
    })
    //密码验证
    var psd = $(".psd").val();
    $(".psd").blur(function () {
        var psd = $(".psd").val();
        if (psd < 6) {
            alert("请输入6-18位密码")
        }
    })

    //验证二次输入密码
    $(".truePsd").blur(function () {
        var psdTrue = $(".truePsd").val();
        if (psd != psdTrue) {
            alert("两次输入密码不一致")

        }
    })
    //手机号验证
    $(".Btell").blur(function () {
        var myreg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;
        if (!myreg.test($(".Btell").val())) {
            // alert("请输入合法手机号")
        } else {
            var mobile = $(this).val()
            url = url.tell_Verification;
            $.ajaxSettings.async = false;
            $.getJSON(url, { mobile: mobile, ranNum: Math.random(), token: null }, function (data) {
                if (data == false) {

                } else {
                    alert("您输入的手机号已存在")
                }
            })
        }
    })
    //校验验证码
    $(".hasVilidateCode").blur(function () {
        var hasVilidateCode = $(this).val();
        console.log(hasVilidateCode)
        if (hasVilidateCode != "") {
            url = url.Verification_Code;
            $.ajax({
                type: 'get',//类型
                url: url,//地址
                dataType: 'json',
                xhrFields: {
                    withCredentials: true
                },
                crossDomain: true,
                async: false,
                data: {
                    verificationCode: hasVilidateCode,
                    ranNum: Math.random()
                },
                //请求成功
                success: function (data) {
                    console.log(data)

                }
            })
        } else {
            alert("请输入验证码")
        }
    })
    //发送手机验证码
    function sendCode() {
        var Btell = $(".Btell").val()
        if (Btell == '') {
            alert("请输入绑定手机号")
        } else {

            $(this).html("60")
            time()
            var sendMobile = $(".Btell").val();
            url = url.sendMobileCode;
            $.getJSON(url, { sendMobile: sendMobile, ranNum: Math.random() }, function (data) {
                console.log(data)
                $("#sessionId").val(data.sessionId);
                if (data.flag == false) {

                } else {
                    $("#mobileCodeError").text("");
                    $("#sessionId").val(data.sessionId);
                }
            })

        }
    }
    //倒计时执行
    function time() {
        if (wait == 0) {
            $(".Tell_Verification_Code_fasong").text("发送短信验证码");
            wait = 60;
            $(".Tell_Verification_Code_fasong").bind("click")
        } else {

            $(".Tell_Verification_Code_fasong").unbind("click")
            wait--;
            $(".Tell_Verification_Code_fasong").text(wait + "秒后重发");
            setTimeout(function () { time() }, 1000)
        }
    }
    //手机号验证
    $(".tellhasVilidateCode").blur(function () {
        var sendMobile = $(this).val();
        url = url.tell_Verification;
        $.ajaxSettings.async = false;
        $.getJSON(url, { sendMobile: sendMobile, mobileCode: null, sessionId: $("#sessionId").val(), ranNum: Math.random() }, function (data) {
            console.log(data)
            if (data == true) {

            } else {
                alert("您输入的验证码错误")
            }
        })

    })
</script>

</html>